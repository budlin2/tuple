{"version":3,"file":"index.2e891989.js","sources":["../../src/components/TabBar/Tab.tsx","../../src/components/TabBar/index.tsx"],"sourcesContent":["import {\n    useState,\n    useRef,\n    MutableRefObject,\n    useContext,\n    MouseEvent as rMouseEvent,\n    useEffect,\n    Dispatch,\n} from 'react';\n\nimport {\n    ID,\n    TupleStylesT,\n    PagesT,\n    TupleClassesT,\n    ViewActionT,\n    ViewActionKind,\n} from '../../types';\nimport { TupleContext } from '../Tuple/TupleProvider';\nimport _classes from './tabs.module.css';\n\n\nexport interface TabProps {\n    index: number,\n    pageId: ID,     // This may serve as a unique identifier for tab as well,\n    viewPath: string\n}\n\n\nexport const Tab = ({\n    index,\n    pageId,\n    viewPath,\n}: TabProps) => {\n    const tabRef = useRef<HTMLDivElement>();\n    const [closeVisible, setCloseVisible] = useState(false);\n    const { pages, classes, styles, dipatchViewAction }: {\n        pages: PagesT,\n        classes: TupleClassesT,\n        styles: TupleStylesT,\n        dipatchViewAction: Dispatch<ViewActionT>\n    } = useContext(TupleContext);\n\n    const tabClassName = `${_classes.tab} ${classes.tab || ''}`;\n    const tabLabelClassName: string = `${_classes.tabLabel} ${classes.tabLabel || ''}`;\n    const tabCloseClassName: string = `${_classes.tabClose} ${classes.tabClose || ''}`;\n\n    // TODO: Mouse Events?\n    const mouseEnterHandler = () => setCloseVisible(true);\n    const mouseLeaveHandler = () => setCloseVisible(false);\n    const mouseDownHandler = (e: rMouseEvent) => {};\n    const mouseUpHandler = (e: MouseEvent) => {};\n    const mouseMoveHandler = (e: MouseEvent) => {};\n\n    // TODO : better typing\n    const dragStartHandler = (e: any) => {\n        console.log('Drag start!');\n        console.log(e.target);\n\n        setCloseVisible(false);\n        e.dataTransfer.setData('pid', pageId);\n        // setTimeout(() => { e.target.style.display = \"none\" }, 0);\n    };\n\n    const dropHandler = e => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        // console.log(pages[pageId].name, e);\n        if (tabRef.current)\n            tabRef.current.style.opacity = '1';\n\n        const pid = e.dataTransfer.getData('pid');\n        dipatchViewAction({\n            type: ViewActionKind.TREE_ADD_TAB,\n            payload: { pid, path: viewPath, index: index+1 }\n        });\n    }\n\n    const dragOverHandler = (e: any) => {\n        e.preventDefault();\n        // e.stopPropagation();\n\n        tabRef.current.style.opacity = '0.5';\n    }\n\n    const dragLeaveHandler = e => {\n        e.preventDefault();\n        // e.stopPropagation();\n        tabRef.current.style.opacity = '1';\n    }\n\n    return (\n        <div ref={tabRef as MutableRefObject<HTMLDivElement> }\n            draggable \n            style={styles.tab}\n            className={tabClassName}\n            onDragStart={dragStartHandler}\n            onDragEnter={dragOverHandler}\n            onDragOver={dragOverHandler}\n            onDragLeave={dragLeaveHandler}\n            onDrop={dropHandler}\n            onMouseOver={mouseEnterHandler}\n            onMouseLeave={mouseLeaveHandler}\n        >\n            <div\n                style={styles.tabLabel}\n                className={tabLabelClassName}>\n                { pages[pageId].name }\n            </div>\n            <div className={_classes.tabCloseContainer}>\n                { closeVisible && <div\n                    style={styles.tabClose}\n                    className={tabCloseClassName}\n                    // TODO : Remove Tab\n                    onClick={ () => {} }>\n                    { \"\\u2716\" }\n                </div>}\n            </div>\n        </div>\n    );\n};\n\n\nexport default Tab;\n","import { useEffect, useState, useContext } from 'react';\n\nimport { ID, TupleStylesT, TupleClassesT, PagesT, SplitViewT } from '../../types';\nimport { TupleContext } from '../Tuple/TupleProvider';\nimport Tab, { TabProps } from './Tab';\n\nimport _classes from './tabs.module.css';\n\n\ninterface Props {\n    pids: ID[],\n    viewPath: string,\n}\n\n\nconst TabBar = ({\n    pids,\n    viewPath,\n}: Props) => {\n    const [pageIds, setPageIds] = useState(pids);\n    const {pages, classes, styles}: {\n        pages: PagesT,\n        classes: TupleClassesT,\n        styles: TupleStylesT\n    } = useContext(TupleContext);\n\n    const tabBarClassName = `${_classes?.tabBar} ${classes?.tabBar}`;\n\n    useEffect(() => {\n        console.log(pageIds);\n    }, [pageIds])\n\n    return (\n        <div\n            className={tabBarClassName}\n            style={styles?.tabBar}\n        >\n            { pageIds.map(\n                (pid, i) => <Tab\n                    index={i}\n                    pageId={pid}\n                    viewPath={viewPath}\n                />\n            )}\n        </div>\n    );\n};\n\n\nexport default TabBar;"],"names":["index","pageId","viewPath","useRef","useState","pages","classes","styles","dipatchViewAction","console","setCloseVisible","e","tabRef","TREE_ADD_TAB","pid","_jsxs","tab","tabClassName","dragStartHandler","dragOverHandler","dragLeaveHandler","dropHandler","mouseEnterHandler","mouseLeaveHandler","tabLabel","tabLabelClassName","name","tabCloseContainer","tabClose","tabCloseClassName","pids","useEffect","_jsx","tabBarClassName","tabBar","i"],"mappings":"gXA6BO,KAAA,GAAA,CAAA,CAAa,QAChBA,SACAC,cACAC,CAEA,KAAA,GAAAC,EAAAA,QAAAA,SACA,CAAA,EAAA,GAAAC,EAAA,QAAA,SAAA,EAAA,EACA,CAAM,QAAEC,UAAOC,SAASC,qBAAQC,EAAAA,QAAAA,WAAAA,CAAAA,EAOhC,EAAA,GAAA,EAAA,OAAA,EAAA,KAAA,KACA,EAAA,GAAA,EAAA,YAAA,EAAA,UAAA,KACA,EAAA,GAAA,EAAA,YAAA,EAAA,UAAA,KAGA,EAAA,IAAA,EAAA,EAAA,EACA,EAAA,IAAA,EAAA,EAAA,EAMA,EAAA,AAAA,GAAA,CACIC,QAAAA,IAAAA,aAAAA,EACAA,QAAAA,IAAAA,EAAAA,MAAAA,EAEAC,EAAAA,EAAAA,EACAC,EAAAA,aAAAA,QAAAA,MAAAA,CAAAA,CAAA,EAIJ,EAAA,AAAA,GAAA,CACIA,EAAAA,eAAAA,EACAA,EAAAA,gBAAAA,EAGA,EAAA,SACIC,GAAAA,QAAAA,MAAAA,QAAAA,KAEJ,KAAA,GAAA,EAAA,aAAA,QAAA,KAAA,EACAJ,EAAAA,CAAkB,KAAA,EAAA,aACOK,QAAAA,CACZ,MAAEC,KAAAA,EAAWZ,MAAAA,EAAAA,CAAuB,CAApC,CAAA,CAFI,EAMrB,EAAA,AAAA,GAAA,CACIS,EAAAA,eAAAA,EAGAC,EAAAA,QAAAA,MAAAA,QAAAA,KAA+B,EAGnC,EAAA,AAAA,GAAA,CACID,EAAAA,eAAAA,EAEAC,EAAAA,QAAAA,MAAAA,QAAAA,GAA+B,EAGnC,MAAAG,GAAA,MAAA,CACI,IAAA,EAAUH,UAAAA,GAAV,MAAA,EAAA,IAEkBI,UAAAA,EACHC,YAAAA,EACEC,YAAAA,EACAC,WAAAA,EACDA,YAAAA,EACCC,OAAAA,EACLC,YAAAA,EACKC,aAAAA,EACCC,SAAAA,CAAAA,EAAAA,MAAAA,CAEd,MAAA,EAAA,SACkBC,UAAAA,EACHC,SAAAA,EAAAA,GAAAA,IACKC,CAAAA,EAAAA,EAAAA,MAAAA,CAEpB,UAAA,EAAA,kBAAyBC,SAAAA,GAAAA,EAAAA,MAAAA,CACH,MAAA,EAAA,SACAC,UAAAA,EACHC,QAAAA,IAAAA,CAEK,EAAE,SAAA,QAChB,CAAA,CALY,CAAA,CAAA,CAlB1B,CAAA,CA4BP,giBC1GD,KAAA,GAAA,CAAA,CAAgB,OACZC,cACA5B,CAEA,KAAA,CAAA,EAAA,GAAAE,EAAA,QAAA,SAAA,CAAA,EACA,CAAM,QAACC,UAAOC,UAASC,EAAAA,QAAAA,WAAAA,CAAAA,EAMvB,EAAA,GAAA,iBAAA,UAAA,iBAAA,SAEAwB,SAAAA,QAAAA,UAAAA,IAAAA,CACItB,QAAAA,IAAAA,CAAAA,CAAA,EAAA,CAAA,CAAA,CAAA,EAGJuB,EAAA,MAAA,CACI,UAAA,EACeC,MAAAA,iBAAAA,OACIC,SAAAA,EAAAA,IAAAA,CAAAA,EAAAA,IAAAA,EAAAA,EAAAA,CAGC,MAAA,EACDC,OAAAA,EACCrB,UACR,CAAA,CAAA,CAJN,CAAA,CASb,EAGD,GAAA,GAAA"}